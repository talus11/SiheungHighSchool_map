<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ë°°ê³§í•´ì†”ì¤‘ ì§„í•™ ì§€ë„</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        body, html { width: 100%; height: 100%; margin: 0; padding: 0; }
        #map { width: 100%; height: 100%; background: #f0f0f0; }
        
        /* íŒì—…ì°½ ìŠ¤íƒ€ì¼ */
        .popup-content {
            text-align: center;
            font-family: 'Malgun Gothic', sans-serif;
            min-width: 160px;
        }
        .btn-route {
            display: inline-block;
            background-color: #03C75A;
            color: white !important;
            padding: 8px 15px;
            text-decoration: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: bold;
            margin-top: 5px;
            cursor: pointer;
            border: none;
        }
        
        /* í•™êµ ì´ë¦„í‘œ ìŠ¤íƒ€ì¼ */
        .school-label {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid #333;
            border-radius: 4px;
            box-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            font-size: 12px;
            font-weight: bold;
            color: #333;
            padding: 3px 6px;
        }

        /* ì‚¬ìš©ë²• ì•ˆë‚´ì°½ ìŠ¤íƒ€ì¼ */
        #guide-box {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1000;
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            font-family: 'Malgun Gothic', sans-serif;
            width: 200px;
            transition: all 0.3s ease;
        }
        
        #guide-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            color: #03C75A;
            cursor: pointer;
        }

        #guide-content {
            margin-top: 10px;
            font-size: 13px;
            color: #555;
            line-height: 1.6;
            display: block;
        }
        
        #guide-box.collapsed #guide-content { display: none; }
        #guide-box.collapsed { width: auto; }

        /* [ì¶”ê°€ë¨] í•˜ë‹¨ ì €ì‘ê¶Œ ë°” ìŠ¤íƒ€ì¼ */
        #footer {
            position: fixed; /* í™”ë©´ í•˜ë‹¨ ê³ ì • */
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.9); /* í°ìƒ‰ ë°°ê²½ (ì•½ê°„ íˆ¬ëª…) */
            border-top: 1px solid #ddd;
            text-align: center;
            padding: 8px 0;
            font-size: 12px;
            font-family: 'Malgun Gothic', sans-serif;
            color: #555;
            z-index: 1000; /* ì§€ë„ë³´ë‹¤ ìœ„ì— ì˜¤ê²Œ */
        }
        /* ì €ì‘ê¶Œ ë¬¸êµ¬ ê°•ì¡° */
        #footer strong {
            color: #333;
        }
    </style>
</head>
<body>

<div id="map"></div>

<div id="guide-box">
    <div id="guide-header" onclick="toggleGuide()">
        <span>ğŸ“¢ ì´ìš© ì•ˆë‚´</span>
        <span id="toggle-icon">â–²</span>
    </div>
    <div id="guide-content">
        1. ì§€ë„ì—ì„œ ê¶ê¸ˆí•œ<br>
           <b>í•™êµ ë§ˆì»¤</b>ë¥¼ ëˆ„ë¥´ì„¸ìš”.<br>
        2. <b>[ê¸¸ì°¾ê¸°]</b> ë²„íŠ¼ì„ ëˆ„ë¥´ë©´<br>
           ë„¤ì´ë²„ ì§€ë„ê°€ ì—´ë¦½ë‹ˆë‹¤.<br>
        3. ì‹¤ì‹œê°„ ë“±í•˜êµ ê²½ë¡œë¥¼<br>
           í™•ì¸í•´ë³´ì„¸ìš”!
    </div>
</div>

<div id="footer">
    â“’ 2025 <strong>ë°°ê³§í•´ì†”ì¤‘ ì •í¬íƒT</strong> ì œì‘
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    // 1. ì§€ë„ ì´ˆê¸°í™” (ì¢Œí‘œ ìˆ˜ì •ë¨: 37.3598316, 126.7172852)
    var startLat = 37.3598316;
    var startLng = 126.7172852;
    var startName = "ë°°ê³§í•´ì†”ì¤‘í•™êµ";

    var map = L.map('map').setView([startLat, startLng], 12);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Â© OpenStreetMap contributors',
        maxZoom: 19
    }).addTo(map);

    // 2. ìš°ë¦¬ í•™êµ ë§ˆì»¤
    var circle = L.circleMarker([startLat, startLng], {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.8,
        radius: 8
    }).addTo(map);
    
    circle.bindTooltip(startName, { permanent: true, direction: 'top', className: 'school-label' }).openTooltip();

    // 3. ê³ ë“±í•™êµ ë°ì´í„°
    var schools = [
        { name: "êµ°ìë””ì§€í„¸ê³¼í•™ê³ ", lat: 37.35016, lng: 126.78543 },
        { name: "ì„œí•´ê³ ", lat: 37.3605728, lng: 126.723802 },
        { name: "ì†Œë˜ê³ ", lat: 37.437594, lng: 126.794869 },
        { name: "ê²½ê¸°ìŠ¤ë§ˆíŠ¸ê³ ", lat: 37.3435332, lng: 126.7522747 },
        { name: "ì€í–‰ê³ ", lat: 37.4432976, lng: 126.8030575 },
        { name: "ì¥ê³¡ê³ ", lat: 37.38028, lng: 126.78221 },
        { name: "ì •ì™•ê³ ", lat: 37.3503989, lng: 126.7283268 },
        { name: "í•œêµ­ì¡°ë¦¬ê³¼í•™ê³ ", lat: 37.458812, lng: 126.833017 },
        { name: "ê²½ê¸°ìë™ì°¨ê³¼í•™ê³ ", lat: 37.4135703, lng: 126.8389099 },
        { name: "í•¨í˜„ê³ ", lat: 37.3660809, lng: 126.7384129 },
        { name: "ì‹œí¥ê³ ", lat: 37.389496, lng: 126.814003 },
        { name: "êµ°ì„œê³ ", lat: 37.348865, lng: 126.7425603 },
        { name: "ì‹œí¥ëŠ¥ê³¡ê³ ", lat: 37.37391, lng: 126.812147 },
        { name: "ì‹œí¥ë§¤í™”ê³ ", lat: 37.4160587, lng: 126.8158993 },
        { name: "ì‹ ì²œê³ ", lat: 37.4351486, lng: 126.7784736 },
        { name: "ë°°ê³§ê³ ", lat: 37.37402, lng: 126.732523 },
        { name: "ëª©ê°ê³ ", lat: 37.372212, lng: 126.857465 }
    ];

    // 4. ë§ˆì»¤ ìƒì„±
    schools.forEach(function(school) {
        var marker = L.marker([school.lat, school.lng]).addTo(map);
        marker.bindTooltip(school.name, { permanent: true, direction: 'top', className: 'school-label', offset: [0, -10] }).openTooltip();
        
        var popupContent = 
            '<div class="popup-content">' +
                '<b>' + school.name + '</b><br>' +
                '<button onclick="openNaverRoute(\'' + school.name + '\', ' + school.lat + ', ' + school.lng + ')" class="btn-route">ğŸšŒ ê¸¸ì°¾ê¸°</button>' +
            '</div>';
        marker.bindPopup(popupContent);
    });

    // 5. ë„¤ì´ë²„ ê¸¸ì°¾ê¸° ì—°ê²° í•¨ìˆ˜
    window.openNaverRoute = function(endName, endLat, endLng) {
        var startCoord = startLng + "," + startLat;
        var endCoord = endLng + "," + endLat;
        var url = "https://map.naver.com/p/directions/" + startCoord + "," + encodeURIComponent(startName) + "/" + endCoord + "," + encodeURIComponent(endName) + "/-/transit";
        window.open(url, '_blank');
    };

    // ì•ˆë‚´ì°½ ê¸°ëŠ¥
    window.toggleGuide = function() {
        var box = document.getElementById('guide-box');
        var icon = document.getElementById('toggle-icon');
        if (box.classList.contains('collapsed')) {
            box.classList.remove('collapsed');
            icon.innerText = "â–²";
        } else {
            box.classList.add('collapsed');
            icon.innerText = "â–¼";
        }
    };
</script>

</body>
</html>
