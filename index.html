<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ë°°ê³§í•´ì†”ì¤‘ ì§„í•™ ì§€ë„</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        body, html { width: 100%; height: 100%; margin: 0; padding: 0; }
        #map { width: 100%; height: 100%; background: #f0f0f0; }
        
        /* íŒì—…ì°½ ìŠ¤íƒ€ì¼ */
        .popup-content {
            text-align: center;
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            min-width: 160px;
        }
        .btn-route {
            display: inline-block;
            background-color: #03C75A;
            color: white !important;
            padding: 8px 15px;
            text-decoration: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: bold;
            margin-top: 5px;
            cursor: pointer;
            border: none;
        }
        .btn-route:hover { background-color: #02b350; }

        /* ì´ë¦„í‘œ(íˆ´íŒ) ìŠ¤íƒ€ì¼ */
        .school-label {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid #333;
            border-radius: 4px;
            box-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            font-size: 12px;
            font-weight: bold;
            color: #333;
            padding: 3px 6px;
        }
    </style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    // 1. ì§€ë„ ì´ˆê¸°í™”
    var startLat = 37.3598316;
    var startLng = 126.7172852;
    var startName = "ë°°ê³§í•´ì†”ì¤‘í•™êµ";

    var map = L.map('map').setView([startLat, startLng], 12);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Â© OpenStreetMap contributors',
        maxZoom: 19
    }).addTo(map);

    // 2. ìš°ë¦¬ í•™êµ ë§ˆì»¤
    var circle = L.circleMarker([startLat, startLng], {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.8,
        radius: 8
    }).addTo(map);
    
    circle.bindTooltip(startName, {
        permanent: true, 
        direction: 'top',
        className: 'school-label'
    }).openTooltip();

    // 3. ê³ ë“±í•™êµ ë°ì´í„°
    var schools = [
        { name: "êµ°ìë””ì§€í„¸ê³¼í•™ê³ ", lat: 37.35016, lng: 126.78543 },
        { name: "ì„œí•´ê³ ", lat: 37.3605728, lng: 126.723802 },
        { name: "ì†Œë˜ê³ ", lat: 37.437594, lng: 126.794869 },
        { name: "ê²½ê¸°ìŠ¤ë§ˆíŠ¸ê³ ", lat: 37.3435332, lng: 126.7522747 },
        { name: "ì€í–‰ê³ ", lat: 37.4432976, lng: 126.8030575 },
        { name: "ì¥ê³¡ê³ ", lat: 37.38028, lng: 126.78221 },
        { name: "ì •ì™•ê³ ", lat: 37.3503989, lng: 126.7283268 },
        { name: "í•œêµ­ì¡°ë¦¬ê³¼í•™ê³ ", lat: 37.458812, lng: 126.833017 },
        { name: "ê²½ê¸°ìë™ì°¨ê³¼í•™ê³ ", lat: 37.4135703, lng: 126.8389099 },
        { name: "í•¨í˜„ê³ ", lat: 37.3660809, lng: 126.7384129 },
        { name: "ì‹œí¥ê³ ", lat: 37.389496, lng: 126.814003 },
        { name: "êµ°ì„œê³ ", lat: 37.348865, lng: 126.7425603 },
        { name: "ì‹œí¥ëŠ¥ê³¡ê³ ", lat: 37.37391, lng: 126.812147 },
        { name: "ì‹œí¥ë§¤í™”ê³ ", lat: 37.4160587, lng: 126.8158993 },
        { name: "ì‹ ì²œê³ ", lat: 37.4351486, lng: 126.7784736 },
        { name: "ë°°ê³§ê³ ", lat: 37.37402, lng: 126.732523 },
        { name: "ëª©ê°ê³ ", lat: 37.372212, lng: 126.857465 }
    ];

    // 4. ë§ˆì»¤ ìƒì„±
    schools.forEach(function(school) {
        var marker = L.marker([school.lat, school.lng]).addTo(map);
        
        // (A) ì´ë¦„í‘œ í•­ìƒ í‘œì‹œ
        marker.bindTooltip(school.name, {
            permanent: true,
            direction: 'top',
            className: 'school-label',
            offset: [0, -10]
        }).openTooltip();

        // (B) í´ë¦­ ì‹œ ê¸¸ì°¾ê¸° ë²„íŠ¼
        var popupContent = 
            '<div class="popup-content">' +
                '<b>' + school.name + '</b><br>' +
                '<button onclick="openNaverRoute(\'' + school.name + '\', ' + school.lat + ', ' + school.lng + ')" class="btn-route">ğŸšŒ ê¸¸ì°¾ê¸°</button>' +
            '</div>';

        marker.bindPopup(popupContent);
    });

    // 5. [ì¤‘ìš”] ë„¤ì´ë²„ ì§€ë„ ê¸¸ì°¾ê¸° URL ì—°ê²° í•¨ìˆ˜ (ìµœì‹  ë²„ì „)
    // ì´ì „ ë²„ì „(v5) ëŒ€ì‹  ìµœì‹  ë²„ì „(p)ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ì •í™•ë„ í–¥ìƒ
    window.openNaverRoute = function(endName, endLat, endLng) {
        // ê²½ë„(lng), ìœ„ë„(lat) ìˆœì„œ ì£¼ì˜
        var startCoord = startLng + "," + startLat;
        var endCoord = endLng + "," + endLat;
        
        // URL êµ¬ì¡°: directions/ì¶œë°œì¢Œí‘œ,ì¶œë°œì§€ëª…/ë„ì°©ì¢Œí‘œ,ë„ì°©ì§€ëª…/-/transit(ëŒ€ì¤‘êµí†µ)
        var url = "https://map.naver.com/p/directions/" + 
                  startCoord + "," + encodeURIComponent(startName) + "/" + 
                  endCoord + "," + encodeURIComponent(endName) + 
                  "/-/transit";
        
        window.open(url, '_blank');
    };
</script>

</body>
</html>